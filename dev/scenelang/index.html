<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>SceneLang · Raytracer.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="Raytracer.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">Raytracer.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Introduction</a></li><li><span class="tocitem">Quickstart</span><ul><li><a class="tocitem" href="../quickstart/cli/">Basic CLI usage</a></li><li><a class="tocitem" href="../quickstart/scenelang/">Basic SceneLang usage</a></li><li><a class="tocitem" href="../quickstart/api/">Basic API usage</a></li></ul></li><li class="is-active"><a class="tocitem" href>SceneLang</a><ul class="internal"><li><a class="tocitem" href="#Contents"><span>Contents</span></a></li><li><a class="tocitem" href="#Description"><span>Description</span></a></li><li><a class="tocitem" href="#scenelang_script_tokenization"><span>Script tokenization</span></a></li><li><a class="tocitem" href="#scenelang_syntax_structure"><span>Syntax structure</span></a></li></ul></li><li><a class="tocitem" href="../cli/">CLI tool</a></li><li><span class="tocitem">API</span><ul><li><a class="tocitem" href="../api/high-level/">High-level API</a></li><li><a class="tocitem" href="../api/low-level/">Low-level API</a></li></ul></li><li><a class="tocitem" href="../extendability/">Extendability</a></li><li><span class="tocitem">For devs</span><ul><li><a class="tocitem" href="../devs/collab/">Collaboration instructions</a></li><li><a class="tocitem" href="../devs/private-api/">Private API</a></li><li><a class="tocitem" href="../devs/scenelang-api/">SceneLang interpreter API</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>SceneLang</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>SceneLang</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/Paolo97Gll/Raytracer.jl/blob/master/docs/src/scenelang.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="scenelang"><a class="docs-heading-anchor" href="#scenelang">SceneLang</a><a id="scenelang-1"></a><a class="docs-heading-anchor-permalink" href="#scenelang" title="Permalink"></a></h1><h2 id="Contents"><a class="docs-heading-anchor" href="#Contents">Contents</a><a id="Contents-1"></a><a class="docs-heading-anchor-permalink" href="#Contents" title="Permalink"></a></h2><ul><li><a href="#scenelang">SceneLang</a></li><li class="no-marker"><ul><li><a href="#Contents">Contents</a></li><li><a href="#Description">Description</a></li><li><a href="#scenelang_script_tokenization">Script tokenization</a></li><li class="no-marker"><ul><li><a href="#scenelang_token_commands">Commands</a></li><li><a href="#scenelang_token_types">Types</a></li><li><a href="#scenelang_token_keywords">Keywords</a></li><li><a href="#scenelang_token_identifiers">Identifiers</a></li><li><a href="#scenelang_token_literals">Literals</a></li></ul></li><li><a href="#scenelang_syntax_structure">Syntax structure</a></li><li class="no-marker"><ul><li><a href="#scenelang_syntax_structure_variables">Variables</a></li><li><a href="#scenelang_syntax_structure_constructors">Constructors</a></li><li class="no-marker"><ul><li><a href="#scenelang_syntax_structure_constructors_numbers">Numbers</a></li><li><a href="#scenelang_syntax_structure_constructors_strings">Strings</a></li><li><a href="#scenelang_syntax_structure_constructors_colors">Colors</a></li><li><a href="#scenelang_syntax_structure_constructors_points">Points</a></li><li><a href="#scenelang_syntax_structure_constructors_lists">Lists</a></li><li><a href="#scenelang_syntax_structure_constructors_transformations">Transformations</a></li><li class="no-marker"><ul><li><a href="#SCALE-command"><code>SCALE</code> command</a></li><li><a href="#TRANSLATE-command"><code>TRANSLATE</code> command</a></li><li><a href="#ROTATE-command"><code>ROTATE</code> command</a></li></ul></li><li><a href="#scenelang_syntax_structure_constructors_images">Images</a></li><li><a href="#scenelang_syntax_structure_constructors_pigments">Pigments</a></li><li><a href="#scenelang_syntax_structure_constructors_brdfs">BRDFs</a></li><li><a href="#scenelang_syntax_structure_constructors_materials">Materials</a></li><li><a href="#scenelang_syntax_structure_constructors_shapes">Shapes</a></li><li><a href="#scenelang_syntax_structure_constructors_lights">Lights</a></li><li><a href="#scenelang_syntax_structure_constructors_pcgs">PCGs</a></li><li><a href="#scenelang_syntax_structure_constructors_camera">Camera</a></li><li><a href="#scenelang_syntax_structure_constructors_renderers">Renderers</a></li><li><a href="#scenelang_syntax_structure_constructors_tracers">Tracers</a></li><li><a href="#scenelang_syntax_structure_constructors_math_expressions">MathExpressions</a></li></ul></li><li><a href="#scenelang_syntax_structure_instructions">Instructions</a></li><li class="no-marker"><ul><li><a href="#scenelang_syntax_structure_instructions_SET"><code>SET</code></a></li><li><a href="#scenelang_syntax_structure_instructions_UNSET"><code>UNSET</code></a></li><li><a href="#scenelang_syntax_structure_instructions_SPAWN"><code>SPAWN</code></a></li><li><a href="#scenelang_syntax_structure_instructions_USING"><code>USING</code></a></li><li><a href="#scenelang_syntax_structure_instructions_DUMP"><code>DUMP</code></a></li></ul></li></ul></li></ul></li></ul><h2 id="Description"><a class="docs-heading-anchor" href="#Description">Description</a><a id="Description-1"></a><a class="docs-heading-anchor-permalink" href="#Description" title="Permalink"></a></h2><p>SceneLang is a Domain-Specific Language (DSL) used to describe a 3D scene that can be rendered by Raytracer.</p><p>Being a DSL, SceneLang lacks some of the basic features of general purpose languages: there are no functions or custom types or even flexible arithmetic operations. SceneLang is made only to construct scenes to be rendered.</p><p>To render the content of a scenelang script just invoke the cli tool command:</p><pre><code class="language-shell hljs">julia raytracer_cli.jl render myscript.sl</code></pre><p>where <code>.sl</code> is the suffix for a SceneLang script.</p><p>Each SceneLang script is parsed through the interpreter present in module <code>Raytracer.Interpreter</code>, which interprets the script by first interpreting the stream of charachters associated with the script as a list of token and then evaluating how these tokens relate to each other as a syntax.</p><p>Let&#39;s start by looking at what tokens are in a SceneLang script.</p><h2 id="scenelang_script_tokenization"><a class="docs-heading-anchor" href="#scenelang_script_tokenization">Script tokenization</a><a id="scenelang_script_tokenization-1"></a><a class="docs-heading-anchor-permalink" href="#scenelang_script_tokenization" title="Permalink"></a></h2><p>In a SceneLang script there are mainly five classes of tokens:</p><ul><li><a href="#scenelang_token_commands">Commands</a></li><li><a href="#scenelang_token_types">Types</a></li><li><a href="#scenelang_token_keywords">Keywords</a></li><li><a href="#scenelang_token_identifiers">Identifiers</a></li><li><a href="#scenelang_token_literals">Literals</a></li></ul><h3 id="scenelang_token_commands"><a class="docs-heading-anchor" href="#scenelang_token_commands">Commands</a><a id="scenelang_token_commands-1"></a><a class="docs-heading-anchor-permalink" href="#scenelang_token_commands" title="Permalink"></a></h3><p>Commands are all-uppercase words. Their role is to indicate that an action will be performed on arguments that follow.</p><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>Commands are a finite group of predetermined words, therefore the lexer throws an exception when it finds an all-uppercase word that is not a listed command.</p></div></div><h6 id="Examples"><a class="docs-heading-anchor" href="#Examples">Examples</a><a id="Examples-1"></a><a class="docs-heading-anchor-permalink" href="#Examples" title="Permalink"></a></h6><pre><code class="language-text hljs">SET  # valid command token
DROP # invalid command token, not in list
Set  # not a command token, lowercase letters are present in the word</code></pre><h3 id="scenelang_token_types"><a class="docs-heading-anchor" href="#scenelang_token_types">Types</a><a id="scenelang_token_types-1"></a><a class="docs-heading-anchor-permalink" href="#scenelang_token_types" title="Permalink"></a></h3><p>Types are words starting with an uppercase letter and at least one lowercase letter in the rest of the word. Their role is to specify the type of a value when it is constructed.</p><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>Types, as commands, are a finite group of predetermined words, therefore the lexer throws an exception when it finds an uppercase-starting word that is not a listed type.</p></div></div><h6 id="Examples-2"><a class="docs-heading-anchor" href="#Examples-2">Examples</a><a class="docs-heading-anchor-permalink" href="#Examples-2" title="Permalink"></a></h6><pre><code class="language-text hljs">Pigment  # valid type token
PIgment  # invalid type token, not in list
pigment  # not a type token, first letter not uppercase</code></pre><h3 id="scenelang_token_keywords"><a class="docs-heading-anchor" href="#scenelang_token_keywords">Keywords</a><a id="scenelang_token_keywords-1"></a><a class="docs-heading-anchor-permalink" href="#scenelang_token_keywords" title="Permalink"></a></h3><p>Keywords are words preceded by a dot (<code>.</code>) marker. They are used either as a specifier to a type or command or as an attribute name when constructing a value.</p><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>Keywords are not a global scope defined list of names, but they have meaning only in certain semantic contexts, but the lexer is unaware of this so any word following a dot will be marked as a keyword even if it is syntactically invalid.</p></div></div><h6 id="Examples-3"><a class="docs-heading-anchor" href="#Examples-3">Examples</a><a class="docs-heading-anchor-permalink" href="#Examples-3" title="Permalink"></a></h6><pre><code class="language-text hljs">.Uniform         # valid keyword token
.transformation  # valid keyword token, there is no rule on capitalization
transformation   # not a keyword token, word not preceded by a dot</code></pre><h3 id="scenelang_token_identifiers"><a class="docs-heading-anchor" href="#scenelang_token_identifiers">Identifiers</a><a id="scenelang_token_identifiers-1"></a><a class="docs-heading-anchor-permalink" href="#scenelang_token_identifiers" title="Permalink"></a></h3><p>Identifiers are words, starting with a lowercase letter, that are intended to be paired with an instance of a type and can be used in place of that value.</p><h6 id="Examples-4"><a class="docs-heading-anchor" href="#Examples-4">Examples</a><a class="docs-heading-anchor-permalink" href="#Examples-4" title="Permalink"></a></h6><pre><code class="language-text hljs">identifier        # valid identifier token
_IDENTIFIER       # valid identifier token, no capitalization rule after the first letter
a_long_identifier # valid identifier token in snake case
Not_an_identifier # not an identifier, first letter must be lowercase or an underscore</code></pre><div class="admonition is-success"><header class="admonition-header">Tip</header><div class="admonition-body"><p>For ease of visual parsability we suggest to avoid the second style above and to prefer <a href="https://en.wikipedia.org/wiki/Snake_case">snake case</a> for long identifiers and keep everything lowercase.</p></div></div><h3 id="scenelang_token_literals"><a class="docs-heading-anchor" href="#scenelang_token_literals">Literals</a><a id="scenelang_token_literals-1"></a><a class="docs-heading-anchor-permalink" href="#scenelang_token_literals" title="Permalink"></a></h3><p>Literals are every other token in the script: numbers, strings, and mathematical expressions.</p><pre><code class="language-julia hljs">6                      # this is a LiteralNumber token
&quot;this is a string&quot;     # this is a LiteralString token
$ 1 + 2id ^ 4 - 1e-2 $ # this is a MathExpression token</code></pre><p><code>MathExpression</code> tokens are a peculiar feature of SceneLang and will be explored deeper <a href="#scenelang_syntax_structure_constructors_math_expressions">in its own chapter</a>.</p><h2 id="scenelang_syntax_structure"><a class="docs-heading-anchor" href="#scenelang_syntax_structure">Syntax structure</a><a id="scenelang_syntax_structure-1"></a><a class="docs-heading-anchor-permalink" href="#scenelang_syntax_structure" title="Permalink"></a></h2><p>The syntax of SceneLang is composed of only three entities:</p><ul><li><a href="#scenelang_syntax_structure_variables">Variables</a></li><li><a href="#scenelang_syntax_structure_constructors">Constructors</a></li><li><a href="#scenelang_syntax_structure_instructions">Instructions</a></li></ul><h3 id="scenelang_syntax_structure_variables"><a class="docs-heading-anchor" href="#scenelang_syntax_structure_variables">Variables</a><a id="scenelang_syntax_structure_variables-1"></a><a class="docs-heading-anchor-permalink" href="#scenelang_syntax_structure_variables" title="Permalink"></a></h3><p>Variables in SceneLang are composed only of an identifier token, so the two terms could be used interchangeably, since the difference stands only in the fact that &quot;variables&quot; is their name when analyzing the syntax while &quot;identifiers&quot; is when talking about lexicon.</p><p>The value stored into a variable cannot be altered or copied into other variables. Values only serve to label a particular instance of an object construted at variable set-up and stored in a dictionary. They behave exactly as if that object were contructed in-place. The only places where a varible is explicitly requested to be is when they are set up and when they are destroyed. In all other instances they could be as substituted with appropriate constructors, at the cost of readability and time to parse the script.</p><h3 id="scenelang_syntax_structure_constructors"><a class="docs-heading-anchor" href="#scenelang_syntax_structure_constructors">Constructors</a><a id="scenelang_syntax_structure_constructors-1"></a><a class="docs-heading-anchor-permalink" href="#scenelang_syntax_structure_constructors" title="Permalink"></a></h3><p>Constructors are a syntactical construct that constructs an object into memory.</p><p>There are three types of constructors <strong>symbolical constructors</strong>, <strong>named constructors</strong>, and <strong>command constructors</strong>.</p><p>Symbolical constructors determine the output type by the symbols present around the arguments, while named constructors have the arguments surrounded by parenthesis an preceded by the type name (and sometimes a type specificator keyword).</p><pre><code class="language-julia hljs">&lt;1, 0, 0&gt;      # a symbolic constructor for a color
Color(1, 0, 0) # the same color but in a named constructor form</code></pre><p>Named constructors have an additional characteristic: they can have default values and can take keyword arguments:</p><pre><code class="language-julia hljs">Color(1)       # the same color as in the previous example but the second
               # and third arguments are defaulted to 0
Color(.R 1)    # as above but with a keyword argument</code></pre><div class="admonition is-success"><header class="admonition-header">Tip</header><div class="admonition-body"><p>Keyword arguments may seem verbose at first but come in very handy both when trying to understand what the code is doing and when one wants to list arguments in a different order than standard.</p></div></div><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>Mixed positional and keyword argument types are allowed as long as the positional arguments precede the keyword ones and as long as the keyword arguments do not redefine positional arguments:</p><pre><code class="language-julia hljs">Color(1, .B 0.5, .G 0.75) # valid mixed argument constructor
Color(.R 1, 0.75, 0.5)    # throws InvalidKeyword exception: positional after keyword
Color(1, .R 0.5)          # throws InvalidKeyword exception: keyword tries to redefine
                          # the first positional argument</code></pre></div></div><p>Command constructors exist either to make the code more readable and/or to simplify notation. They are composed of a command and one or more arguments. If more than one argument may be required these must be surrounded by curved parenthesis. A clear example are the commands to create rotation matrices without requiring the user to manually type the transformation matrix.</p><p>For example the following two constructors return the same transformation:</p><pre><code class="language-julia hljs">Transformation([1.0,  0.0,        0.0,       0.0,
                0.0,  0.707107,  -0.707107,  0.0,
                0.0,  0.707107,   0.707107,  0.0,
                0.0,  0.0,        0.0,       1.0])
ROTATE(.X 45)</code></pre><p>Numbers and strings can be considered primitive types and thus require a dedicated tokenization. Therefore a named or command constructor for them would be needlessy redundant and verbose as their constructor would take only one argument of the same type of the one produced and there is no risk of ambiguity.</p><h6 id="Examples-5"><a class="docs-heading-anchor" href="#Examples-5">Examples</a><a class="docs-heading-anchor-permalink" href="#Examples-5" title="Permalink"></a></h6><pre><code class="language-julia hljs">9          # since a number is a primitive type it can be
           # constructed by simply typing the number itself
&quot;a string&quot; # a string must surround the desired text with double quotes</code></pre><p>Now we&#39;ll list all constructors for all the different types supported by SceneLang.</p><h4 id="scenelang_syntax_structure_constructors_numbers"><a class="docs-heading-anchor" href="#scenelang_syntax_structure_constructors_numbers">Numbers</a><a id="scenelang_syntax_structure_constructors_numbers-1"></a><a class="docs-heading-anchor-permalink" href="#scenelang_syntax_structure_constructors_numbers" title="Permalink"></a></h4><p>As stated above, numbers are primitive types and have a symbolic constructor which is a simple numeric token.</p><p>This constructor supports integer notation <code>1</code>, dotted notations <code>1.0</code> and <code>1.</code>, and the scientific notations <code>1e2</code>, <code>1e+2</code>, <code>1e-2</code> and equivalent notation using <code>E</code>.</p><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>The notation <code>.1</code> is not supported, the parser would interpret it as a keyword, use <code>+.1</code>, <code>-.1</code>, or <code>0.1</code> instead.</p></div></div><h6 id="scenelang_syntax_structure_constructors_numbers_time"><a class="docs-heading-anchor" href="#scenelang_syntax_structure_constructors_numbers_time"><code>TIME</code> command</a><a id="scenelang_syntax_structure_constructors_numbers_time-1"></a><a class="docs-heading-anchor-permalink" href="#scenelang_syntax_structure_constructors_numbers_time" title="Permalink"></a></h6><p>A special constructor command can also be used: <code>TIME</code>. This constructor returns the value of the <code>time</code> setting, which is set at the cli level (see <a href="../cli/#raytracer_cli_render_image">render image</a> and <a href="../cli/#raytracer_cli_render_animation">render animation</a>). This is needed in animations to change values between a frame and the other.</p><h4 id="scenelang_syntax_structure_constructors_strings"><a class="docs-heading-anchor" href="#scenelang_syntax_structure_constructors_strings">Strings</a><a id="scenelang_syntax_structure_constructors_strings-1"></a><a class="docs-heading-anchor-permalink" href="#scenelang_syntax_structure_constructors_strings" title="Permalink"></a></h4><p>Being a primitive type, strings only have a symbolic constructor.</p><p>Strings are surrounded by double quotes (<code>&quot;</code>) and support the usual set of escaped characters (e.g. <code>\n</code>, <code>\t</code>, ...). SceneLang strings do not support formatting or interpolations.</p><h4 id="scenelang_syntax_structure_constructors_colors"><a class="docs-heading-anchor" href="#scenelang_syntax_structure_constructors_colors">Colors</a><a id="scenelang_syntax_structure_constructors_colors-1"></a><a class="docs-heading-anchor-permalink" href="#scenelang_syntax_structure_constructors_colors" title="Permalink"></a></h4><p>Colors have a named constructor with signature</p><pre><code class="language-julia hljs">Color(.R red::number = 0, .G green::number = 0, .B blue::number = 0)</code></pre><p>and a symbolic constructor with signature</p><pre><code class="language-julia hljs">&lt;red::number, green::number, blue::number&gt;</code></pre><p>Note that these colors are pixels of an HDR image, therefore have no upper bound.</p><h4 id="scenelang_syntax_structure_constructors_points"><a class="docs-heading-anchor" href="#scenelang_syntax_structure_constructors_points">Points</a><a id="scenelang_syntax_structure_constructors_points-1"></a><a class="docs-heading-anchor-permalink" href="#scenelang_syntax_structure_constructors_points" title="Permalink"></a></h4><p>Points have a named constructor with signature</p><pre><code class="language-julia hljs">Point(.X x::number = 0, .Y y::number = 0, .Z z::number = 0)</code></pre><p>and a symbolic constructor with signature</p><pre><code class="language-julia hljs">{x::number, y::number, z::number}</code></pre><h4 id="scenelang_syntax_structure_constructors_lists"><a class="docs-heading-anchor" href="#scenelang_syntax_structure_constructors_lists">Lists</a><a id="scenelang_syntax_structure_constructors_lists-1"></a><a class="docs-heading-anchor-permalink" href="#scenelang_syntax_structure_constructors_lists" title="Permalink"></a></h4><p>Lists have a named constructor with signature</p><pre><code class="language-julia hljs">List(element::number, ::number...)</code></pre><p>and a symbolic constructor with signature</p><pre><code class="language-julia hljs">[element::number, ::number...]</code></pre><h4 id="scenelang_syntax_structure_constructors_transformations"><a class="docs-heading-anchor" href="#scenelang_syntax_structure_constructors_transformations">Transformations</a><a id="scenelang_syntax_structure_constructors_transformations-1"></a><a class="docs-heading-anchor-permalink" href="#scenelang_syntax_structure_constructors_transformations" title="Permalink"></a></h4><p>Transformations have a named constructor with signature</p><pre><code class="language-julia hljs">Transformation(matrix::list.lenght16)</code></pre><p>Transformations can be concatenated using the symbol <code>*</code> which behaves like a matrix multiplication operation.</p><p>Transformations also have the following four command constructors.</p><h5 id="SCALE-command"><a class="docs-heading-anchor" href="#SCALE-command"><code>SCALE</code> command</a><a id="SCALE-command-1"></a><a class="docs-heading-anchor-permalink" href="#SCALE-command" title="Permalink"></a></h5><p>The <code>SCALE</code> command constructs a scaling transformation and has two different signatures:</p><pre><code class="language-julia hljs">SCALE(.X x::number = 1, .Y y::number = 1, .Z z::number = 1) # scales by different factors on the given axes
SCALE factor::number # scales uniformly on all axes</code></pre><h5 id="TRANSLATE-command"><a class="docs-heading-anchor" href="#TRANSLATE-command"><code>TRANSLATE</code> command</a><a id="TRANSLATE-command-1"></a><a class="docs-heading-anchor-permalink" href="#TRANSLATE-command" title="Permalink"></a></h5><p>The <code>TRANSLATE</code> command constructs a translation transformation. It has the signature</p><pre><code class="language-julia hljs">TRANSLATE(.X x::number = 0, .Y y::number = 0, .Z z::number = 0)</code></pre><h5 id="ROTATE-command"><a class="docs-heading-anchor" href="#ROTATE-command"><code>ROTATE</code> command</a><a id="ROTATE-command-1"></a><a class="docs-heading-anchor-permalink" href="#ROTATE-command" title="Permalink"></a></h5><p>The <code>ROTATE</code> command constructs a rotation transformation combining rotations in different axis. In the scene&#39;s euclidean 3D space scaling and translation transformations are commutable along different axes, so the order of application of the transformation does not matter: this is not the case for rotations.</p><p>Therefore the <code>ROTATE</code> command has a peculiar syntax for its arguments: after the command a series of keywords indicating the rotation axis are followed by the rotation angles in degrees in a way similar to the following example.</p><pre><code class="language-julia hljs">ROTATE(.X 45 * .Z 30 * .X 20 * .Y 15)</code></pre><p>You can clearly see that in this syntax keywords can be repeated and are, therefore, non-optional. Furthermore, the order in which they are written matters as the result of the construction will be the concatenation of all the individual rotations. This is the reason why the arguments are not separated by commas but by concatenation symbols <code>*</code>.</p><h4 id="scenelang_syntax_structure_constructors_images"><a class="docs-heading-anchor" href="#scenelang_syntax_structure_constructors_images">Images</a><a id="scenelang_syntax_structure_constructors_images-1"></a><a class="docs-heading-anchor-permalink" href="#scenelang_syntax_structure_constructors_images" title="Permalink"></a></h4><p>Images have two name constructors with signature</p><pre><code class="language-julia hljs">Image(file_path::string) # loads an image from a file at the given path if the format is valid
Image(width::number.integer, height::number.integer) # constructs a black image of size `width`x`height`</code></pre><p>and a command constructor with signature</p><pre><code class="language-julia hljs">LOAD file_path::string # loads an image from a file at the given path if the format is valid</code></pre><p>Valid argument of <a href="#scenelang_syntax_structure_instructions_USING"><code>USING</code></a>.</p><h4 id="scenelang_syntax_structure_constructors_pigments"><a class="docs-heading-anchor" href="#scenelang_syntax_structure_constructors_pigments">Pigments</a><a id="scenelang_syntax_structure_constructors_pigments-1"></a><a class="docs-heading-anchor-permalink" href="#scenelang_syntax_structure_constructors_pigments" title="Permalink"></a></h4><p>Pigments have named constructors associated with each of their subtype specifiers. Their signatures are:</p><pre><code class="language-julia hljs">Pigment.Uniform(.color color::color = &lt;1, 1, 1&gt;)
Pigment.Checkered(.N::number.integer = 2 , .color_on color_on::color = &lt;1, 1, 1&gt;, .color_off::color = &lt;0, 0, 0&gt;)
Pigment.Image(.image image::image = Image(1, 1))</code></pre><h4 id="scenelang_syntax_structure_constructors_brdfs"><a class="docs-heading-anchor" href="#scenelang_syntax_structure_constructors_brdfs">BRDFs</a><a id="scenelang_syntax_structure_constructors_brdfs-1"></a><a class="docs-heading-anchor-permalink" href="#scenelang_syntax_structure_constructors_brdfs" title="Permalink"></a></h4><p>BRDFs have named constructors associated with each of their subtype specifiers. Their signatures are:</p><pre><code class="language-julia hljs">Brdf.Diffuse(.pigment pigment::pigment = Pigment.Uniform())
Brdf.Specular(.pigment pigment::pigment = Pigment.uniform(), .threshold_angle_rad angle::number = 0.0017453294)</code></pre><h4 id="scenelang_syntax_structure_constructors_materials"><a class="docs-heading-anchor" href="#scenelang_syntax_structure_constructors_materials">Materials</a><a id="scenelang_syntax_structure_constructors_materials-1"></a><a class="docs-heading-anchor-permalink" href="#scenelang_syntax_structure_constructors_materials" title="Permalink"></a></h4><p>Materials have a named constructor with signature</p><pre><code class="language-julia hljs">Material(.brdf brdf::brdf = Brdf.Diffuse(), .emitted_radiance radiance::pigment = Pigment.Uniform())</code></pre><h4 id="scenelang_syntax_structure_constructors_shapes"><a class="docs-heading-anchor" href="#scenelang_syntax_structure_constructors_shapes">Shapes</a><a id="scenelang_syntax_structure_constructors_shapes-1"></a><a class="docs-heading-anchor-permalink" href="#scenelang_syntax_structure_constructors_shapes" title="Permalink"></a></h4><p>Shapes have named constructors associated with each of their subtype specifiers. Their signatures are:</p><pre><code class="language-julia hljs">Shapes.Sphere  (.material material::material = Material(),
                .transformation transformation::transformation = SCALE())
Shapes.Plane   (.material material::material = Material(),
                .transformation transformation::transformation = SCALE())
Shapes.Cube    (.material material::material = Material(),
                .transformation transformation::transformation = SCALE())
Shapes.Cylinder(.material material::material = Material(),
                .transformation transformation::transformation = SCALE())</code></pre><p>Furthermore, shapes have also command constructors for Constructive Solid Geometries (CSG). Their signatures are:</p><pre><code class="language-julia hljs">UNITE(shape::shape, ::shape...)
INTERSECT(shape::shape, ::shape...)
DIFF(shape::shape, ::shape...)
FUSE(shape::shape, ::shape...)</code></pre><p>Valid argument of <a href="#scenelang_syntax_structure_instructions_SPAWN"><code>SPAWN</code></a>.</p><h4 id="scenelang_syntax_structure_constructors_lights"><a class="docs-heading-anchor" href="#scenelang_syntax_structure_constructors_lights">Lights</a><a id="scenelang_syntax_structure_constructors_lights-1"></a><a class="docs-heading-anchor-permalink" href="#scenelang_syntax_structure_constructors_lights" title="Permalink"></a></h4><p>Lights have a named constructor with signature</p><pre><code class="language-julia hljs">Light(.position position::point = {0,0,0},
      .color color::color = &lt;1,1,1&gt;,
      .linear_radius radius::number = 0)</code></pre><p>Valid argument of <a href="#scenelang_syntax_structure_instructions_SPAWN"><code>SPAWN</code></a>.</p><h4 id="scenelang_syntax_structure_constructors_pcgs"><a class="docs-heading-anchor" href="#scenelang_syntax_structure_constructors_pcgs">PCGs</a><a id="scenelang_syntax_structure_constructors_pcgs-1"></a><a class="docs-heading-anchor-permalink" href="#scenelang_syntax_structure_constructors_pcgs" title="Permalink"></a></h4><p>PCGs have a named constructor with signature</p><pre><code class="language-julia hljs">Pcg(.state state::number.integer = 42,
    .inc   inc::number.integer = 54)</code></pre><h4 id="scenelang_syntax_structure_constructors_camera"><a class="docs-heading-anchor" href="#scenelang_syntax_structure_constructors_camera">Camera</a><a id="scenelang_syntax_structure_constructors_camera-1"></a><a class="docs-heading-anchor-permalink" href="#scenelang_syntax_structure_constructors_camera" title="Permalink"></a></h4><p>Cameras have named constructors associated with each of their subtype specifiers. Their signatures are:</p><pre><code class="language-julia hljs">Camera.Perspective(.aspect_ratio ratio::number = 1.,
                   .transformation transformation::transformation = SCALE 1.,
                   .screen_distance distance::number = 1.)
Camera.Orthogonal(.aspect_ratio ratio::number = 1.,
                  .transformation transformation::transformation = SCALE 1.)</code></pre><p>Valid argument of <a href="#scenelang_syntax_structure_instructions_USING"><code>USING</code></a>.</p><h4 id="scenelang_syntax_structure_constructors_renderers"><a class="docs-heading-anchor" href="#scenelang_syntax_structure_constructors_renderers">Renderers</a><a id="scenelang_syntax_structure_constructors_renderers-1"></a><a class="docs-heading-anchor-permalink" href="#scenelang_syntax_structure_constructors_renderers" title="Permalink"></a></h4><p>Renderers have named constructors associated with each of their subtype specifiers. Their signatures are:</p><pre><code class="language-julia hljs">Renderer.OnOff(.on_color on::color = &lt;1,1,1&gt;,
               .off_color off::color = &lt;0,0,0&gt;)
Renderer.Flat(.background_color background::color = &lt;0,0,0&gt;)
Renderer.PointLight(.background_color background::color = &lt;0,0,0&gt;,
                    .ambient_color ambient::color = &lt;1e-3,1e-3,1e-3&gt;)
Renderer.PathTracer(.background_color color::color = &lt;0,0,0&gt;,
                    .rng              rng::pcg = Pcg()
                    .n                n::number.integer = 10,
                    .max_depth        max::number.integer = 2,
                    .roulette_depth   roulette::number.integer = 3)</code></pre><p>Valid argument of <a href="#scenelang_syntax_structure_instructions_USING"><code>USING</code></a>.</p><h4 id="scenelang_syntax_structure_constructors_tracers"><a class="docs-heading-anchor" href="#scenelang_syntax_structure_constructors_tracers">Tracers</a><a id="scenelang_syntax_structure_constructors_tracers-1"></a><a class="docs-heading-anchor-permalink" href="#scenelang_syntax_structure_constructors_tracers" title="Permalink"></a></h4><p>Tracers have a named constructor with signature</p><pre><code class="language-julia hljs">Tracer(.samples_per_side samples::number = 1, .rng rng::pcg = Pcg())</code></pre><p>Valid argument of <a href="#scenelang_syntax_structure_instructions_USING"><code>USING</code></a>.</p><h4 id="scenelang_syntax_structure_constructors_math_expressions"><a class="docs-heading-anchor" href="#scenelang_syntax_structure_constructors_math_expressions">MathExpressions</a><a id="scenelang_syntax_structure_constructors_math_expressions-1"></a><a class="docs-heading-anchor-permalink" href="#scenelang_syntax_structure_constructors_math_expressions" title="Permalink"></a></h4><p>Numbers, points, and colors can also be constructed via a <code>MathExpression</code> token. Math expressions are sections of code surrounded by dollar signs <code>$</code>. They can contain only mathematical operations, numbers and identifiers storing numbers.</p><p>These expressions are first checked for validity at lexing time, where it is ensured that they only contain numbers, identifiers, and valid operations and that these operations have the right amount of arguments to them. The valid operations are:</p><table><tr><th style="text-align: right">op symbol</th><th style="text-align: right"># of args</th><th style="text-align: right">action</th></tr><tr><td style="text-align: right">+</td><td style="text-align: right">1+</td><td style="text-align: right">add</td></tr><tr><td style="text-align: right">-</td><td style="text-align: right">1 or 2</td><td style="text-align: right">change sign or subtract</td></tr><tr><td style="text-align: right">*</td><td style="text-align: right">1+</td><td style="text-align: right">multiply</td></tr><tr><td style="text-align: right">/</td><td style="text-align: right">2</td><td style="text-align: right">float divide</td></tr><tr><td style="text-align: right">div</td><td style="text-align: right">2</td><td style="text-align: right">integer divide</td></tr><tr><td style="text-align: right">%</td><td style="text-align: right">2</td><td style="text-align: right">modulo</td></tr><tr><td style="text-align: right">^</td><td style="text-align: right">2</td><td style="text-align: right">raise to the power of</td></tr><tr><td style="text-align: right">floor</td><td style="text-align: right">1</td><td style="text-align: right">approximate to integer by defect</td></tr><tr><td style="text-align: right">ceil</td><td style="text-align: right">1</td><td style="text-align: right">approximate to integer by excess</td></tr><tr><td style="text-align: right">round</td><td style="text-align: right">1</td><td style="text-align: right">approximate to nearest integer</td></tr><tr><td style="text-align: right">exp</td><td style="text-align: right">1</td><td style="text-align: right">natural base exponential</td></tr><tr><td style="text-align: right">exp2</td><td style="text-align: right">1</td><td style="text-align: right">binary base exponential</td></tr><tr><td style="text-align: right">exp10</td><td style="text-align: right">1</td><td style="text-align: right">decimal base exponential</td></tr><tr><td style="text-align: right">log</td><td style="text-align: right">1</td><td style="text-align: right">natural base logarithm</td></tr><tr><td style="text-align: right">log2</td><td style="text-align: right">1</td><td style="text-align: right">binary base logarithm</td></tr><tr><td style="text-align: right">log10</td><td style="text-align: right">1</td><td style="text-align: right">decimal base logarithm</td></tr><tr><td style="text-align: right">log1p</td><td style="text-align: right">1</td><td style="text-align: right">natural base logarithm of <code>arg + 1</code></td></tr><tr><td style="text-align: right">sin</td><td style="text-align: right">1</td><td style="text-align: right">sine function (argument in radians)</td></tr><tr><td style="text-align: right">cos</td><td style="text-align: right">1</td><td style="text-align: right">cos function (argument in radians)</td></tr><tr><td style="text-align: right">tan</td><td style="text-align: right">1</td><td style="text-align: right">tan function (argument in radians)</td></tr><tr><td style="text-align: right">asin</td><td style="text-align: right">1</td><td style="text-align: right">arcsine function</td></tr><tr><td style="text-align: right">acos</td><td style="text-align: right">1</td><td style="text-align: right">arccos function</td></tr><tr><td style="text-align: right">atan</td><td style="text-align: right">1 or 2</td><td style="text-align: right">arctan function</td></tr><tr><td style="text-align: right">Point</td><td style="text-align: right">3</td><td style="text-align: right">Julia <code>Point</code> constructor</td></tr><tr><td style="text-align: right">RGB</td><td style="text-align: right">3</td><td style="text-align: right">Julia <code>RGB</code> constructor</td></tr></table><p>After successful tokenization the expression is evaluated. Starting with the innermost expression all the identifiers are substituted with their value (if they are defined, otherwise an exception will be thrown) and then the result of the expression is calculated. If the result is a finite number the second innermost expression is evaluated and so on until the outermost expression is evaluated. If the result is either infinite or <code>NaN</code> an exception will be thrown.</p><p>The tokenization and evaluation processes make use of the <code>Meta.parse</code> and <code>eval</code> functions provided by the Julia language. Therefore every valid Julia syntax for mathematical expressions is considered valid as long as it respects the restrictions discussed previously in this section.</p><h6 id="Examples-6"><a class="docs-heading-anchor" href="#Examples-6">Examples</a><a class="docs-heading-anchor-permalink" href="#Examples-6" title="Permalink"></a></h6><pre><code class="language-julia hljs">SET a 9                   # set the `a` variable to be equal to 9
SET res1 $1 + 2a$         # this will set `res1` to be equal to 19
# SET res2 $1 + 2b$       # this would throw an `UndefinedIdentifier` exception
# SET res3 $div(1, 2, 3)$ # this would throw an `InvalidExpression` exception</code></pre><h3 id="scenelang_syntax_structure_instructions"><a class="docs-heading-anchor" href="#scenelang_syntax_structure_instructions">Instructions</a><a id="scenelang_syntax_structure_instructions-1"></a><a class="docs-heading-anchor-permalink" href="#scenelang_syntax_structure_instructions" title="Permalink"></a></h3><p>SceneLang scripts are a series of instructions parsed by the interpreter.</p><p>Each instruction starts with an instruction command and ends when all the possible arguments are consumed.</p><p>Arguments can only be variables or constructors.</p><div class="admonition is-info"><header class="admonition-header">Info</header><div class="admonition-body"><p>In the following command signatures we will use:</p><ul><li>enclosing angular brackets<code>&lt;&gt;</code> to isolate single variable elements of the signature;</li><li>a pipe <code>|</code> between two elements indicates that one or the other can be present at that position;</li><li>enclosing squared brackets <code>[]</code> to indicate optional arguments;</li><li>appended dots <code>...</code> to indicate that the previous element may be repeated an indefinite amount of times.</li></ul></div></div><h4 id="scenelang_syntax_structure_instructions_SET"><a class="docs-heading-anchor" href="#scenelang_syntax_structure_instructions_SET"><code>SET</code></a><a id="scenelang_syntax_structure_instructions_SET-1"></a><a class="docs-heading-anchor-permalink" href="#scenelang_syntax_structure_instructions_SET" title="Permalink"></a></h4><p>Assign to a variable a constructed variable.</p><pre><code class="language-julia hljs">SET &lt;&lt;identifier&gt; &lt;constructor&gt;&gt;...</code></pre><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>All variables are constants in Scenelang and they exist and can&#39;t be overwritten until they are <code>UNSET</code>.</p></div></div><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>You cannot set an identifier to be equal to the value stored in another identifier as it is not needed in a program where the lifetime of the value is the lifetime of the variable.</p></div></div><h6 id="Examples-7"><a class="docs-heading-anchor" href="#Examples-7">Examples</a><a class="docs-heading-anchor-permalink" href="#Examples-7" title="Permalink"></a></h6><pre><code class="language-julia hljs">SET my_number 6 # sets `my_number` to be equal to 6

# &lt;identifier&gt; &lt;value&gt; pairs can be chained after a SET statement
SET
    sphere Shape.Sphere()
    cube   Shape.Cube()
# as soon as the next token in the series is
# not an identifier the SET statement is interrupted</code></pre><div class="admonition is-success"><header class="admonition-header">Tip</header><div class="admonition-body"><p>Since SceneLang is not sensitive to spaces and newlines chained commands can have any layout you prefer, we still suggest, for easier visual parsing, the style we use in our examples of separating every element by a newline and a tabulation.</p></div></div><h4 id="scenelang_syntax_structure_instructions_UNSET"><a class="docs-heading-anchor" href="#scenelang_syntax_structure_instructions_UNSET"><code>UNSET</code></a><a id="scenelang_syntax_structure_instructions_UNSET-1"></a><a class="docs-heading-anchor-permalink" href="#scenelang_syntax_structure_instructions_UNSET" title="Permalink"></a></h4><p>Destroy a variable and the assigned value.</p><pre><code class="language-julia hljs">UNSET &lt;identifier&gt;...</code></pre><h6 id="Examples-8"><a class="docs-heading-anchor" href="#Examples-8">Examples</a><a class="docs-heading-anchor-permalink" href="#Examples-8" title="Permalink"></a></h6><pre><code class="language-julia hljs">UNSET my_number # my_number is now not assigned to any value and
                # cannot be called any more unless it is SET again

# &lt;identifier&gt;s can be chained after an UNSET statement
UNSET
    sphere
    cube
# as soon as the next token in the series is
# not an identifier the UNSET statement is interrupted</code></pre><h4 id="scenelang_syntax_structure_instructions_SPAWN"><a class="docs-heading-anchor" href="#scenelang_syntax_structure_instructions_SPAWN"><code>SPAWN</code></a><a id="scenelang_syntax_structure_instructions_SPAWN-1"></a><a class="docs-heading-anchor-permalink" href="#scenelang_syntax_structure_instructions_SPAWN" title="Permalink"></a></h4><p>Spawns a shape or a light into the rendered world.</p><pre><code class="language-julia hljs">SPAWN &lt;&lt;shape_identifier&gt;|&lt;shape_constructor&gt;&gt;...</code></pre><h6 id="Examples-9"><a class="docs-heading-anchor" href="#Examples-9">Examples</a><a class="docs-heading-anchor-permalink" href="#Examples-9" title="Permalink"></a></h6><pre><code class="language-julia hljs">SET my_number 10
SET my_sphere Shape.Sphere()

# &lt;identifier&gt;s or &lt;constructor&gt;s can be chained after a SPAWN statement
SPAWN
    my_sphere    # my sphere is spawned into the world
#   my_number    # this would throw a `WrongValueType` exception
    Shape.Cube() # spawned shapes can also be constructed in-place
    Light()      # lights can also be spawned
# as soon as the next token in the series is
# not an identifier the SPAWN statement is interrupted</code></pre><h4 id="scenelang_syntax_structure_instructions_USING"><a class="docs-heading-anchor" href="#scenelang_syntax_structure_instructions_USING"><code>USING</code></a><a id="scenelang_syntax_structure_instructions_USING-1"></a><a class="docs-heading-anchor-permalink" href="#scenelang_syntax_structure_instructions_USING" title="Permalink"></a></h4><p>Sets a rendering settings to a given value.</p><pre><code class="language-julia hljs">USING &lt;&lt;camera_identifier&gt;  |&lt;camera_constructor&gt;  |
       &lt;image_identifier&gt;   |&lt;image_constructor&gt;   |
       &lt;renderer_identifier&gt;|&lt;renderer_constructor&gt;|
       &lt;tracer_identifier&gt;  |&lt;tracer_constructor&gt;
      &gt;...</code></pre><p>The rendering settings that can be set are:</p><ul><li>the camera to be used and its properties;</li><li>the image to be impressed;</li><li>the renderer to be used and its properties;</li><li>the tracer to be used and its properties.</li></ul><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p><code>USING</code> instruction must be used <strong>once and only once per setting</strong> within a script. if a setting is not defined an <code>UndefinedSetting</code> exception will be thrown, else, if a definition occurs more than once, a <code>SettingRedefinition</code> exception will be thrown.</p></div></div><h6 id="Examples-10"><a class="docs-heading-anchor" href="#Examples-10">Examples</a><a class="docs-heading-anchor-permalink" href="#Examples-10" title="Permalink"></a></h6><pre><code class="language-julia hljs">USING Camera.Orthogonal() # sets the camera setting to
                          # be the default orthogonal camera

SET p_camera Camera.Perspective()
SET image Image(1920, 1080)

# &lt;identifier&gt;s or &lt;constructor&gt;s can be chained after a USING statement
USING
    Renderer.PointLight() # Usable objects can
    Tracer()              # be constructed in-place
    image                 # or they could be used by identifier
#   p_camera			  # this would throw a `SettingRedefinition` exception
# as soon as the next token in the series is
# not an identifier the USING statement is interrupted</code></pre><h4 id="scenelang_syntax_structure_instructions_DUMP"><a class="docs-heading-anchor" href="#scenelang_syntax_structure_instructions_DUMP"><code>DUMP</code></a><a id="scenelang_syntax_structure_instructions_DUMP-1"></a><a class="docs-heading-anchor-permalink" href="#scenelang_syntax_structure_instructions_DUMP" title="Permalink"></a></h4><p>Prints to <code>stdout</code> the specified content. Used mainy as a debug tool.</p><pre><code class="language-julia hljs"># prints the value associated with the specified field of the scene
DUMP.variables
DUMP.world
DUMP.lights
DUMP.image
DUMP.camera
DUMP.renderer
DUMP.tracer

DUMP.ALL # prints all of the above</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../quickstart/api/">« Basic API usage</a><a class="docs-footer-nextpage" href="../cli/">CLI tool »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.10 on <span class="colophon-date" title="Thursday 16 December 2021 18:50">Thursday 16 December 2021</span>. Using Julia version 1.7.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
